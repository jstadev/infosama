!function(t){var i=function(i,e,o,h){if(this.obj=i,this.options=i.options,this.name=e,this.href=h.href,h.data?this.data=h.data:this.data="",h.url&&(this.url=h.url),this.el=t('<a href="'+this.href+'" data-content="'+this.data+'">'+this.name+"</a>"),this.el.addClass("node"),t("body").prepend(this.el),o){var a=i.lines.length;i.lines[a]=new s(i,this,o)}else i.activeNode=this,t(this.el).addClass("active"),t(this.el).addClass("root"),t(this.el).attr("id","act-root");this.parent=o,this.children=[],this.parent&&this.parent.children.push(this),this.moving=!1,this.moveTimer=0,this.obj.movementStopped=!1,this.visible=!0,this.hasLayout=!0,this.x=1,this.y=1,this.dx=0,this.dy=0,this.hasPosition=!1,this.content=[],this.el.css("position","absolute");var n=this;this.el.draggable({drag:function(){i.root.animateToStatic()}}),this.el.click((function(){if(!t(this).attr("data-content"))return i.activeNode&&(i.activeNode.el.removeClass("active"),i.activeNode.parent&&i.activeNode.parent.el.removeClass("activeparent")),"function"==typeof h.onclick&&h.onclick(n),i.activeNode=n,i.activeNode.el.addClass("active"),i.activeNode.parent&&i.activeNode.parent.el.addClass("activeparent"),i.root.animateToStatic(),!1}))};function s(t,i,s){this.obj=t,this.options=t.options,this.start=i,this.colour="blue",this.size="thick",this.end=s}i.prototype.animateToStatic=function(){clearTimeout(this.moveTimer);var t=this;this.moveTimer=setTimeout((function(){t.obj.movementStopped=!0}),8e3),this.moving||(this.moving=!0,this.obj.movementStopped=!1,this.animateLoop())},i.prototype.animateLoop=function(){this.obj.canvas.clear();for(var t=0;t<this.obj.lines.length&&!window.CP.shouldStopExecution(0);t++)this.obj.lines[t].updatePosition();if(window.CP.exitedLoop(0),this.findEquilibrium()||this.obj.movementStopped)this.moving=!1;else{var i=this;setTimeout((function(){i.animateLoop()}),10)}},i.prototype.findEquilibrium=function(){var t=!0;t=this.display()&&t;for(var i=0;i<this.children.length&&!window.CP.shouldStopExecution(1);i++)t=this.children[i].findEquilibrium()&&t;return window.CP.exitedLoop(1),t},i.prototype.display=function(i){this.visible?this.obj.activeNode!==this&&this.obj.activeNode!==this.parent&&this.obj.activeNode.parent!==this&&(this.el.hide(),this.visible=!1):this.obj.activeNode!==this&&this.obj.activeNode!==this.parent&&this.obj.activeNode.parent!==this||(this.el.show(),this.visible=!0),void 0===i&&(i=0),this.drawn=!0,this.hasPosition||(this.x=this.options.mapArea.x/2,this.y=this.options.mapArea.y/2,this.hasPosition=!0);var s=2*Math.PI/this.children.length,e=this;return t.each(this.children,(function(t){if(!this.hasPosition&&(!this.options.showProgressive||i<=1)){var o=t*s;this.x=50*Math.cos(o)+e.x,this.y=50*Math.sin(o)+e.y,this.hasPosition=!0,this.el.css("left",this.x+"px"),this.el.css("top",this.y+"px")}})),this.updatePosition()},i.prototype.updatePosition=function(){if(t(this.el).hasClass("ui-draggable-dragging"))return this.x=parseInt(this.el.css("left"))+t(this.el).width()/3,this.y=parseInt(this.el.css("top"))+t(this.el).height()/3,this.dx=0,this.dy=0,!1;var i=this.getForceVector();if(this.dx+=i.x*this.options.timeperiod,this.dy+=i.y*this.options.timeperiod,this.dx=this.dx*this.options.damping,this.dy=this.dy*this.options.damping,Math.abs(this.dx)<this.options.minSpeed&&(this.dx=0),Math.abs(this.dy)<this.options.minSpeed&&(this.dy=0),Math.abs(this.dx)+Math.abs(this.dy)==0)return!0;this.x+=this.dx*this.options.timeperiod,this.y+=this.dy*this.options.timeperiod,this.x=Math.min(this.options.mapArea.x,Math.max(1,this.x)),this.y=Math.min(this.options.mapArea.y,Math.max(1,this.y));var s=this.x-t(this.el).width()/2,e=this.y-t(this.el).height()/2-10;return this.el.css("left",s+"px"),this.el.css("top",e+"px"),!1},i.prototype.getForceVector=function(){for(var i=0,s=0,e=this.obj.nodes,o=this.obj.lines,h=0;h<e.length&&!window.CP.shouldStopExecution(2);h++)if(e[h]!=this&&(!this.options.showSublines||e[h].hasLayout)&&e[h].visible){var a=e[h].x-this.x,n=e[h].y-this.y,l=a/Math.abs(a),r=(Math.abs(n),Math.sqrt(a*a+n*n)),c=Math.atan(n/a);0==a&&(c=Math.PI/2,l=0);var d=500*this.options.repulse/(r*r);Math.abs(r)<500&&(i+=-d*Math.cos(c)*l,s+=-d*Math.sin(c)*l)}window.CP.exitedLoop(2);var p=this.x+t(this.el).width();d=500*this.options.wallrepulse/(p*p);i+=Math.min(2,d);var u=this.options.mapArea.x-p;d=-500*this.options.wallrepulse/(u*u);i+=Math.max(-2,d);d=500*this.options.wallrepulse/(this.y*this.y);s+=Math.min(2,d);var v=this.options.mapArea.y-this.y;d=-500*this.options.wallrepulse/(v*v);s+=Math.max(-2,d);for(h=0;h<o.length&&!window.CP.shouldStopExecution(3);h++){var m=null;if(o[h].start==this)m=o[h].end;else{if(o[h].end!=this)continue;m=o[h].start}if(m.visible){a=m.x-this.x,n=m.y-this.y,r=Math.sqrt(a*a+n*n),l=a/Math.abs(a),c=Math.atan(n/a);0==a&&(c=Math.PI/2,l=0);d=this.options.attract*r/2e4;Math.abs(r)>0&&(i+=d*Math.cos(c)*l,s+=d*Math.sin(c)*l)}}if(window.CP.exitedLoop(3),this.obj.activeNode===this){a=(m=this.options.mapArea).x/2-this.options.centreOffset-this.x,n=m.y/2-this.y,r=Math.sqrt(a*a+n*n),l=a/Math.abs(a),c=Math.atan(n/a);0==a&&(c=Math.PI/2,l=0);d=.1*this.options.attract*r*0/1e3;Math.abs(r)>0&&(i+=d*Math.cos(c)*l,s+=d*Math.sin(c)*l)}return Math.abs(i)>this.options.maxForce&&(i=this.options.maxForce*(i/Math.abs(i))),Math.abs(s)>this.options.maxForce&&(s=this.options.maxForce*(s/Math.abs(s))),{x:i,y:s}},i.prototype.removeNode=function(){for(var i=0;i<this.children.length&&!window.CP.shouldStopExecution(4);i++)this.children[i].removeNode();window.CP.exitedLoop(4);var s=this.obj.nodes;this.obj.nodes=new Array;for(i=0;i<s.length&&!window.CP.shouldStopExecution(5);i++)s[i]!==this&&this.obj.nodes.push(s[i]);window.CP.exitedLoop(5);var e=this.obj.lines;this.obj.lines=new Array;for(i=0;i<e.length&&!window.CP.shouldStopExecution(6);i++)e[i].start!=this&&e[i].end!=this&&this.obj.lines.push(e[i]);window.CP.exitedLoop(6),t(this.el).remove()},s.prototype.updatePosition=function(){if((!this.options.showSublines||this.start.hasLayout&&this.end.hasLayout)&&(this.options.showSublines||this.start.visible&&this.end.visible)){this.start.visible&&this.end.visible?this.size="thick":this.size="thin",this.obj.activeNode.parent==this.start||this.obj.activeNode.parent==this.end?this.colour="red":this.colour="blue",this.strokeStyle="#FFF",this.colour,this.size;this.obj.canvas.path("M"+this.start.x+" "+this.start.y+"L"+this.end.x+" "+this.end.y).attr({stroke:this.strokeStyle,opacity:.2,"stroke-width":"5px"})}},t.fn.addNode=function(t,s,e){var o=this[0],h=o.nodes[o.nodes.length]=new i(o,s,t,e);return console.log(o.root),o.root.animateToStatic(),h},t.fn.addRootNode=function(t,s){var e=this[0].nodes[0]=new i(this[0],t,null,s);return this[0].root=e,e},t.fn.removeNode=function(t){return this.each((function(){}))},t.fn.mindmap=function(i){i=t.extend({attract:15,repulse:6,damping:.55,timeperiod:10,wallrepulse:.4,mapArea:{x:-1,y:-1},canvasError:"alert",minSpeed:.05,maxForce:.1,showSublines:!1,updateIterationCount:20,showProgressive:!0,centreOffset:100,timer:0},i);return this.each((function(){var s=this;this.mindmapInit=!0,this.nodes=new Array,this.lines=new Array,this.activeNode=null,this.options=i,this.animateToStatic=function(){this.root.animateToStatic()},t(window).resize((function(){s.animateToStatic()})),-1==i.mapArea.x&&(i.mapArea.x=t(window).width()),-1==i.mapArea.y&&(i.mapArea.y=t(window).height()),this.canvas=Raphael(0,0,i.mapArea.x,i.mapArea.y),t(this).addClass("js-mindmap-active"),t(this).keyup((function(t){switch(t.which){case 33:case 38:s.activeNode.parent&&s.activeNode.parent.el.click();break;case 13:case 34:case 40:s.activeNode.children.length&&s.activeNode.children[0].el.click();break;case 37:if(o=s.activeNode.parent){var i=null;if(o.children[0]===s.activeNode)i=o.children[o.children.length-1];else{for(var e=1;e<o.children.length&&!window.CP.shouldStopExecution(7);e++)o.children[e]===s.activeNode&&(i=o.children[e-1]);window.CP.exitedLoop(7)}i&&i.el.click()}break;case 39:var o;if(o=s.activeNode.parent){i=null;if(o.children[o.children.length-1]===s.activeNode)i=o.children[0];else{for(e=o.children.length-2;e>=0&&!window.CP.shouldStopExecution(8);e--)o.children[e]===s.activeNode&&(i=o.children[e+1]);window.CP.exitedLoop(8)}i&&i.el.click()}}return!1}))}))}}(jQuery),$(document).ready((function(){$("body").mindmap();var t=[];t["moon-supply"]="<ul><li>chest pain sucks</li></ul>",t["moon-story"]="<ul><li>chest pain sucks</li></ul>",t["moon-inc"]="<ul><li>chest pain sucks</li></ul>",t["moon-socials"]="<ul><li>chest pain sucks</li></ul>>",t["grom-supply"]="<ul><li>chest pain sucks</li></ul>",t["grom-story"]="<ul><li>chest pain sucks</li></ul>",t["grom-inc"]="<ul><li>chest pain sucks</li></ul>",t["grom-socials"]="<ul><li>chest pain sucks</li></ul>>",t["pond-supply"]="<ul><li>chest pain sucks</li></ul>",t["pond-story"]="<ul><li>chest pain sucks</li></ul>",t["pond-battles"]="<ul><li>chest pain sucks</li></ul>",t["pond-inc"]="<ul><li>chest pain sucks</li></ul>",t["pond-socials"]="<ul><li>chest pain sucks</li></ul>>",t["exo-supply"]="<ul><li>chest pain sucks</li></ul>",t["exo-story"]="<ul><li>chest pain sucks</li></ul>",t["exo-inc"]="<ul><li>chest pain sucks</li></ul>",t["exo-socials"]="<ul><li>chest pain sucks</li></ul>>",t["rare-story"]="<ul><li>chest pain sucks</li></ul>",t["rare-soc"]="<ul><li>chest pain sucks</li></ul>",t["poop-tokenomics"]="<ul><li>chest pain sucks</li></ul>>",t["poop-story"]="<ul><li>chest pain sucks</li></ul>",t["poop-usecase"]="<ul><li>chest pain sucks</li></ul>>",t["poop-socials"]="<ul><li>chest pain sucks</li></ul>>",t["rss-supply"]="<ul><li>chest pain sucks</li></ul>",t["rss-story"]="<ul><li>chest pain sucks</li></ul>",t["rss-resources"]="<ul><li>chest pain sucks</li></ul>>",t["rss-usecase"]="<ul><li>chest pain sucks</li></ul>>",t["rss-socials"]="<ul><li>chest pain sucks</li></ul>>";var i=$("body>ul>li").get(0).mynode=$("body").addRootNode($("body>ul>li>a").text(),{href:"/",url:"/",onclick:function(t){$(t.obj.activeNode.content).each((function(){this.hide()}))}});$("body>ul>li").hide(),$(".content").hide();var s=function(){var t=$(this).parents("li").get(0);t=void 0===t?i:t.mynode,this.mynode=$("body").addNode(t,$("a:eq(0)",this).text(),{href:$("a:eq(0)",this).attr("href"),data:$("a:eq(0)",this).attr("data-content"),onclick:function(t){var i=$(this).attr("href");"#"!=i?window.open(i,"_blank"):($(t.obj.activeNode.content).each((function(){this.hide()})),$(t.content).each((function(){this.show()})))}}),$(this).hide(),$(">ul>li",this).each(s)};$("body>ul>li>ul").each((function(){$(">li",this).each(s)})),$("a").click((function(t){var i="#"+$(this).attr("data-content");i&&$(".alert .content-container").html($(i).html()).parent().show()}))}));
